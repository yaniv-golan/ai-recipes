name: Recipe Schema
description: Validation schema for AI workflow recipes
version: 0.4.0

required:
  - name
  - description
  - tools
  - workflow
  - parameters

properties:
  name:
    type: string
    maxLength: 100
    description: "Name of the workflow recipe"
    pattern: "^[a-zA-Z0-9-]+$"  # Ensure URL-friendly names
  
  description:
    type: string
    maxLength: 500
    description: "Brief description of what this recipe accomplishes"
  
  tags:
    type: array
    items:
      type: string
      pattern: "^[a-zA-Z0-9-]+$"  # Ensure URL-friendly tags
    description: "Free-form tags for categorization and discovery"
  
  parameters:
    type: array
    items:
      type: object
      required:
        - name
        - description
        - requiredœœ
      properties:
        name:
          type: string
          description: "Parameter name used in prompts"
        description:
          type: string
          description: "Description of what this parameter is for"
        required:
          type: boolean
        default:
          type: string
          description: "Optional default value"
        example:
          type: string
          description: "Example value for guidance"

  tools:
    type: object
    properties:
      chatgpt:
        type: object
        required:
          - used_for
          - settings
        properties:
          used_for:
            type: array
            items:
              type: string
          settings:
            type: object
            required:
              - model
            properties:
              model:
                type: string
                enum:
                  - GPT-4o
                  - GPT-4o with canvas
                  - o1-preview
                  - o1-mini
              enable_web_search:
                type: boolean
                default: false
                description: "Whether to enable web search"
                how: "https://openai.com/index/introducing-chatgpt-search/"
              custom_gpt:
                type: object
                properties:
                  name:
                    type: string
                  url:
                    type: string
                description: "If using a specific GPT from the store"

      claude:
        type: object
        required:
          - used_for
          - settings
        properties:
          used_for:
            type: array
            items:
              type: string
          settings:
            type: object
            required:
              - model
            properties:
              model:
                type: string
                enum:
                  - Claude 3.5 Sonnet
                  - Claude 3 Opus
              enable_artifacts:
                type: boolean
                default: false
                how: "https://docs.anthropic.com/en/docs/artifacts/overview"
              enable_analysis_tool:
                type: boolean
                default: false
                how: "https://docs.anthropic.com/en/docs/analysis-tool/overview"

      perplexity:
        type: object
        required:
          - used_for
          - settings
        properties:
          used_for:
            type: array
            items:
              type: string
          settings:
            type: object
            required:
              - mode
            properties:
              focus:
                type: string
                enum:
                  - Web
                  - Academic
                  - Math
                  - Writing
                  - Video
                  - Social
              enable_pro:
                type: boolean
                default: false
                description: "Whether to use Pro mode"

      google_docs:
        type: object
        required:
          - used_for
        properties:
          used_for:
            type: array
            items:
              type: string
          settings:
            type: object
            properties:
              enable_markdown:
                type: boolean
                default: true
                description: "Enable markdown support for copying/pasting"

  workflow:
    type: array
    items:
      type: object
      required:
        - id
        - name
        - tool
        - description
        - tool_usage
        - prompt
      properties:
        id:
          type: string
          description: "Unique identifier for this step"
        name:
          type: string
          description: "Human readable name"
        tool:
          type: string
          description: "Tool to use"
        description:
          type: string
          description: "What this step accomplishes"
        tool_usage:
          type: string
          description: "Step-by-step instructions for using the tool"
        tool_settings:
          type: object
          description: "Override default tool settings for this step"
        input_source:
          type: string
          description: "Where to get input for this step"
        prompt:
          type: string
          description: "The prompt template to use"
        output_handling:
          type: string
          description: "How to handle and save the output"
        notes:
          type: string
          description: "Additional notes and tips for this step"
  
  tips:
    type: array
    items:
      type: string
    description: "Helpful tips for using this recipe"
  
  examples:
    type: array
    items:
      type: object
      properties:
        parameters:
          type: object
          description: "Example parameter values"
        sample_queries:
          type: string
          description: "Example queries or outputs"
    description: "Example uses of the recipe"